# querygen Reference

## Interpolation syntax

The typical interpolation syntax is:

```
{{ident : type}}
```

- `ident` will be the name of the field in the associated generated struct.
- `type` will be the type of the field

If using the same parameter multiple times, you may use `_`
from the second occurrence onwards, instead of repeating the type name.

```
SELECT * FROM {{tableName: string}} JOIN other on {{tableName: _}}.x = other.y
```

## `QueryParam` interface

While the `QueryParam` interface is exposed to enable you to use
`interpolate.Do` with some amount of type safety, it is not guaranteed
to be backwards-compatible across releases. As such, the only contract
you can rely on is that the struct types generated by one version of the CLI
will satisfy the `QueryParam` interface in the matching library version.

## Codegen rules

### Variable naming and type

- Queries must be written as well-formed string constants (i.e. be constant-foldable)
- The Query constant must be named ending with `Query(Fragment)?`,
  optionally followed by  `_` or numbers.
- The constant must have one or more instances of interpolation syntax.

The generated type name will be `queryVarName + "Vars"`.

### File naming

|       Original file suffix | Generated file suffix |
|---------------------------:|----------------------:|
| `_query.go`, `_queries.go` |       `_query_gen.go` |
|                 `_test.go` |  `_query_gen_test.go` |
|                       `.go` |       `_query_gen.go` |